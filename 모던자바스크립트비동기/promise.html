<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- 6.30 Promise -->
    <script>
        // ğŸ’—promiseë¥¼ ë¶ˆëŸ¬ì˜´!ğŸ’—
        // ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì œê³µí•´ì£¼ëŠ” ê°ì²´ - callbackí•¨ìˆ˜ë¥¼ ê°€ì§(resolveì™€ reject)
        // ì„±ê³µí•˜ë©´ resolveê°€ í˜¸ì¶œ/ì‹¤íŒ¨í•˜ë©´ rejectê°€ í˜¸ì¶œ
        // 1. ê°’ì— promiseë¥¼ ë„£ì–´ì¤€ê³ !
        // const promise = new Promise((resolve, reject)=>{
        //     console.log("ìˆ˜í–‰ì¤‘.....");
        //     setTimeout(()=>{
        //         // resolve("ì•ˆë…•ì•ˆë…•ì•ˆë…•");
        //         reject(new Error('not Found'))      //new Errorí•˜ë©´ errorë¥¼ ë§Œë“¬!
        //     },2000)
        // })
        // //promiseë¥¼ ì‚¬ìš©í•˜ëŠ” ì…ì¥
        // promise.then(value=>console.log(value))         //resolve -> thenì´ ë°›ìŒ
        // .catch(error=>console.log(error))               //reject -> catchê°€ ë°›ìŒ(catchë¥¼ ì“°ë©´ errorë¥¼ ë¶ˆëŸ¬ì˜´!)
        // .finally(()=>{
        //     console.log("ëë‚¬ì–´ìš”");            
        // })



        // // 2. í•¨ìˆ˜ë¥¼ ë¶€ë¥´ë©´ promiseê°€ ì‹¤í–‰
        // // ìƒíƒœë¥¼ ê°€ì§!
        // function fetchUser(){
        //     return new Promise((resolve,reject)=>{
        //         // return "green";                  // ì´ë ‡ê²Œ í•˜ê³  ì½˜ì†”ì„ ë³´ë©´ PromiseÂ {<pending>} ì´ë ‡ê²Œ ëœ¸!!! [[PromiseState]]: "pending" -> pendingìƒíƒœ(resolveë‚˜ rejectê°€ í˜¸ì¶œì´ ë˜ì–´ì•¼ì§€ promiseëŠ” ëì´ë‚¨!)
        //         // resolve("í”„ë¡œë¯¸ìŠ¤ì„±ê³µ");          //PromiseÂ {<fulfilled>: 'í”„ë¡œë¯¸ìŠ¤ì„±ê³µ'}
        //         reject(new Error('ddddd'));         //<rejected>: Error: ddddd
        //     })
        // }
        // const user = fetchUser();
        // console.log(user);
        // //resolveë‚˜ rejectê°€ í˜¸ì¶œì´ ë˜ì–´ì•¼ì§€ promiseëŠ” ëì´ë‚¨!


        // // 3.
        // const fetchNumber = new Promise((resolve, reject)=>{
        //     setTimeout(()=>resolve(1),1000)         //1ì´ë¼ëŠ” ê²°ê³¼ê°’ì„ ê°€ì ¸ì˜¤ëŠ” promise ë§Œë“ ê³ 
        // })
        // //ğŸ’›thenì€ ê°’ì„ ì „ë‹¬í•  ìˆ˜ë„ ìˆê³  ë˜ë‹¤ë¥¸ í”„ë¡œë¯¸ìŠ¤ë„ ì „ë‹¬í•  ìˆ˜ ìˆìŒ.
        // //  => promiseë¥¼ ë‹¤ì‹œ returní•´ì¤„ ìˆ˜ ìˆë‹¤ëŠ”ê±°!
        // fetchNumber.then(num => num*2)          //num=1, ê²°ê³¼ 1*2=2     (resolve(1)ì´ë‹ˆê¹Œ num=1)
        // .then(num => num*3)                     //2*3=6
        // .then(num => {
        //     return new Promise((resolve,reject)=>{
        //         setTimeout(()=>resolve(num-1),1000)     //6-1=5
        //     })  
        // }).then(num => console.log(num));               //5ê°€ ì½˜ì†”ì— ì°í˜!


        // // 4. promiseë¥¼ returní•´ì£¼ëŠ” í•¨ìˆ˜ë“¤
        // function getHen(){
        //     return new Promise((resolve, reject)=>{
        //         setTimeout(()=>resolve('ì•”íƒ‰'),1000);
        //     })
        // }
        // function getEgg(){
        //     return new Promise((resolve, reject)=>{
        //         setTimeout(()=>reject(new Error('ê³„ë€ì„ ë°›ì•„ì˜¬ ìˆ˜ ì—†ì–´')),1000);
        //     })
        // }
        // function cook(egg){
        //     return new Promise((resolve, reject)=>{
        //         setTimeout(resolve(egg+'í›„ë¼ì´'),1000);
        //     })
        // }
        // getHen()
        // .then(getEgg)               //getEggì˜ Promise(()=>{setTimeout(()=>reject(new Error('ê³„ë€ì„ ë°›ì•„ì˜¬ ìˆ˜ ì—†ì–´')),1000)});ë¥¼ ë°›ì•„ì˜¤ê³ !
        // .catch(error=>{
        //     return 'í–„';            //errorë¥¼ catchë¡œ ë°›ì•„ì„œ ë‹¤ë¥¸ì• ë¡œ return    => ê·¸ë˜ì„œ ìµœì¢…ì ìœ¼ë¡œ! cook(egg)ëŒ€ì‹  cook(í–„)ì´ ë‹´ê¸°ëŠ”ê±°!
        // }).then(cook).then(console.log);       


        // https://joshua1988.github.io/web-development/javascript/js-async-await/      - async&await ì°¸ê³ í•˜ê¸°!
        //ğŸ’™asyncëŠ” promiseë¥¼ ë” í¸í•˜ê²Œ ì“¸ ìˆ˜ ìˆê²Œ í•´ì¤Œ!
        //ğŸ’™asyncë¥¼ í•¨ìˆ˜ ì•ì— ì ìœ¼ë©´ í”„ë¡œë¯¸ìŠ¤ë¥¼ ì“°ì§€ ì•Šì•„ë„ í•¨ìˆ˜ ì•ˆì— ë¸”ëŸ­ì´ í”„ë¡œë¯¸ìŠ¤ë¡œ ì ìš©ë¨
        //ğŸ§¡await
        //ğŸ§¡asyncê°€ ë¶™ì€ í•¨ìˆ˜ ì•ˆì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ
        // 5. 
        // function delay(ms){
        //     return new Promise((resolve, reject)=> setTimeout(resolve,ms));
        // }
        // async function getApple(){
        //     await delay(2000);
        //     return 'ì‚¬ê³¼';
        // }
        // async function getBanana(){
        //     await delay(2000);
        //     return 'ë°”ë‚˜ë‚˜';
        // }
        // async function pickFruits(){
        //     const apple = await getApple();
        //     const banana = await getBanana();
        //     return `${apple}+${banana}`;
        // }
        // pickFruits().then(console.log);

        //ğŸ’™asyncë§Œ ë¶™ìœ¼ë©´ returní•´ì£¼ëŠ” ì• ê°€ promiseê°€ ë¨!
        //ğŸ’™í•¨ìˆ˜ ì•ì— asyncê°€ ë¶™ìœ¼ë©´ í•´ë‹¹ í•¨ìˆ˜ëŠ” í•­ìƒ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜
        //ğŸ’™í”„ë¡œë¯¸ìŠ¤ê°€ ì•„ë‹Œ ê²ƒì„ í”„ë¡œë¯¸ìŠ¤ë¡œ ê°ì‹¸ì„œ ë°˜í™˜
        // 6.
        async function asyfu(){
            return 1;
        }
        //promiseê°€ ë¶„ëª…íˆ ì—†ëŠ”ë° thenì„ ì“¸ ìˆ˜ ìˆìŒ
        asyfu().then(console.log);
        async function asyfu2(){
            return Promise.resolve(1);
        }
        asyfu2().then(console.log);         //1 1ì´ ì°í˜€ìˆìŒ
        //ğŸ§¡awaitì€ asyncê°€ ë¶™ì–´ìˆëŠ” í•¨ìˆ˜ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥
        //ğŸ§¡await í”„ë¡œë¯¸ìŠ¤ê°€ ì²˜ë¦¬ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¼
        //ğŸ§¡await async í‚¤ì›Œë“œê°€ ìˆëŠ” í•¨ìˆ˜ ì•ˆì—ì„œë§Œ ì‚¬ìš©ê°€ëŠ¥ (ì¼ë°˜ í•¨ìˆ˜ì—ëŠ” awaitì‚¬ìš©ë¶ˆê°€)
        async function promiseF(){
            let promise = new Promise((resolve, reject)=>{
                setTimeout(()=>resolve("ì™„ë£Œ!"),1000)
            });
            let result = await promise;         //ë°”ë¡œ ì´ ê°’ì„ ë‹´ê¸°ì§€ ì•Šê³  awaitì´ ì‹¤í–‰ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ëŠ” ì• ! ë¹„ë™ê¸° ì „ì†¡ê°’ì„ ê¸°ë‹¤ë¦¬ê³  ìˆëŠ”ê±°- ê¸°ë‹¤ë¦¬ë‹¤ê°€ ê·¸ì œì„œì•¼ ë³€ìˆ˜ì˜ ê°’ì„ ë‹´ì•„ì£¼ëŠ”ê±°
        }                                       //1ì´ˆê°€ ì§€ë‚˜ì„œ! ê°’ì„ ë°›ì•„ì„œ 'ì™„ë£Œ!' ê°€ ëœ¨ëŠ”ê±°!!!!!


        // 7.
        // ì—ëŸ¬ í•¸ë“¤ë§
        // async function f(){
        //     await Promise.reject(new Error("ì—ëŸ¬ë°œìƒ!!!!"));
        // }
        // // ğŸ§¡await- promiseê°€ ê±°ì ˆë˜ë©´ throwë¬¸ì„ ì‘ì„±í•œ ê²ƒ ì²˜ëŸ¼ try-catchë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ!!
        // //   ì‹¤íŒ¨í–ˆì„ ë•Œ ì œì–´ì˜ íë¦„ì„ catchë¸”ëŸ­ìœ¼ë¡œ ë„˜ê²¨ì£¼ê² ë‹¤!
        // async function f(){
        //     throw new Error("ì—ëŸ¬ë°œìƒ!!!!");
        // }
        // * 6.29ì— reactì—ì„œ lamp-shopping-clientì—ì„œ ì‘ì„±í•œ ì½”ë“œ ìƒê°í•´ë³´ì!!!
        async function f(){
            try{
                let response = await fetch('ìœ íš¨í•˜ì§€ì•Šì€ ì£¼ì†Œ');
            }
            catch(e){
                console.log(e);
            }
        }
    </script>
</body>
</html>